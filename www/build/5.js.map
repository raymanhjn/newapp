{"version":3,"sources":["../../src/pages/order-confirm/order-confirm.module.ts","../../src/pages/order-confirm/order-confirm.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderConfirmPage } from './order-confirm';\n\n@NgModule({\n  declarations: [\n    OrderConfirmPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderConfirmPage),\n  ],\n})\nexport class OrderConfirmPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirm/order-confirm.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { FirebaseServiceProvider } from '../../providers/firebase-service/firebase-service';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Order } from '../../models/restaurant';\n\n@IonicPage()\n@Component({\n  selector: 'page-order-confirm',\n  templateUrl: 'order-confirm.html',\n})\nexport class OrderConfirmPage {\n\n  orders: any[];\n  userLoggedin: boolean;\n  orderInfo = {} as Order;\n  uid: string;\n  callback:any;\n  totalprice:number=0;\n  orderform: FormGroup;\n  errorMessage:string=\"\";\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public firebaseService: FirebaseServiceProvider,\n              public afauth: AngularFireAuth,\n              public formBuilder: FormBuilder) {\n    this.orders = this.navParams.get('order');\n    this.callback = this.navParams.get('callback');\n\n    //form config\n    this.orderform = formBuilder.group({\n      contact_name:['',Validators.compose([Validators.required])],\n      address:['',Validators.compose([Validators.required])],\n      phone:['',Validators.compose([Validators.required])],\n    });\n\n    //calculate the total price\n    if(this.orders && this.orders.length>0){\n      this.orders.map( order => {\n        this.totalprice+=order.food.price*order.number;\n      });\n    }\n\n    //check if user loggined so taht we can get the saved contact methods\n    this.afauth.authState.subscribe( data => {\n      if(data && data.email && data.uid) {\n        this.userLoggedin = true;\n        this.uid = data.uid;\n      } else {\n        this.userLoggedin = false;\n        this.uid = \"\";\n      }\n    });\n  }\n\n  submitOrder(value:any) {\n    if(value.contact_name && value.address && value.phone) {\n      let order = this.orders.length>0? this.orders.map( order => {\n        return order;\n      }):[];\n\n      let contact = {\n        contact_name: value.contact_name,\n        address: value.address,\n        phone: value.phone,\n      }\n\n      this.orderInfo = {\n        uid: this.uid,\n        order: order,\n        contact: contact,\n        count: this.totalprice,\n        status: \"pending\",\n      };\n     this.firebaseService.order(this.orderInfo);\n     this.orders = [];\n     this.backToMenu();\n    } else {\n      this.errorMessage =\" missing contact infomation \";\n    }\n  }\n\n  decrement_item(i) {\n    this.orders[i].number = this.orders[i].number-1;\n    this.totalprice -= this.orders[i].food.price;\n  }\n\n  increment_item(i) {\n    this.orders[i].number = this.orders[i].number+1;\n    this.totalprice += this.orders[i].food.price;\n  }\n\n  delete_item(i) {\n    this.totalprice-=this.orders[i].food.price*this.orders[i].number;\n    this.orders.splice(i,1);\n    if(this.orders.length<1) {\n      this.backToMenu();\n    }\n  }\n\n  backToMenu() {\n    this.callback(this.orders).then( ()=> {\n      this.navCtrl.pop();\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirm/order-confirm.ts"],"sourceRoot":""}